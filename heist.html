<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>For You â€” Happy Valentine's</title>
  <style>
    /* Reset & base */
    :root{--bg1:#ffd1e8;--bg2:#e8d5ff;--card:#fff8ee;--accent:#ff7ab6;--muted:#8b6b7a}
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial;smooth-font-smoothing:antialiased;color:#4b2b3b}

    /* Page background gradient */
    body{
      background:linear-gradient(160deg,var(--bg1),var(--bg2));
      overflow-x:hidden;
      -webkit-font-smoothing:antialiased;
    }

    /* Floating hearts container (behind everything) */
    .hearts{position:fixed;inset:0;pointer-events:none;z-index:0;overflow:hidden}
    .heart{position:absolute;opacity:.18;color:#ff6fa3;font-size:14px;will-change:transform,opacity}

    /* Main layout */
    .wrap{min-height:100vh;display:flex;align-items:stretch;gap:2rem;padding:3rem;z-index:1}
    .col{padding:1rem}
    .left{flex:0 0 40%;display:flex;align-items:center;justify-content:center}
    .right{flex:1 1 60%;display:flex;align-items:center;justify-content:center}

    /* Lottie container */
    .teddy-holder{width:90%;max-width:420px;height:80vh;display:flex;align-items:center;justify-content:center}
    #teddy{width:100%;height:100%}

    /* Letter card */
    .card{width:100%;max-width:760px;height:70vh;background:var(--card);border-radius:20px;padding:2.2rem;box-shadow:0 10px 30px rgba(75,43,59,0.12);position:relative;overflow-y:auto;overflow-x:hidden}
    .card-inner{max-width:680px;margin:0 auto}
    .from{font-size:0.9rem;color:var(--muted);margin-bottom:0.6rem}
    .letter{font-size:1.05rem;line-height:1.6;color:#5a3744}

    /* Lines */
    .line{opacity:0;transform:translateY(6px);transition:opacity .35s ease,transform .35s ease;margin:0 0 .8rem}
    .line.visible{opacity:1;transform:translateY(0)}

    /* Sentence slide-in + left-to-right reveal (FASTER) */
    .sentence{
      display:inline;
      overflow:visible;
      white-space:normal;
      word-wrap:break-word;
      overflow-wrap:break-word;
      opacity:0;
      transform:translateX(-12px);
    }
    .sentence.reveal{
      opacity:1;
      transform:translateX(0);
      transition:
        transform .30s ease,
        opacity .12s ease;
    }

    /* End button */
    .end-row{display:flex;justify-content:center;margin-top:1.6rem}
    .end-btn{background:linear-gradient(90deg,#ff9ccf,#ff6fa3);color:white;padding:.8rem 1.1rem;border-radius:999px;border:none;font-weight:600;cursor:pointer;opacity:0;transform:scale(.95);transition:all .28s cubic-bezier(.2,.9,.2,1);box-shadow:0 6px 18px rgba(255,106,153,.18)}
    .end-btn.show{opacity:1;transform:scale(1)}
    .end-btn:hover{transform:scale(1.04);box-shadow:0 12px 30px rgba(255,106,153,.26)}

    /* âœ… Kisses: bigger + prettier */
    .kiss{
      position:fixed;
      pointer-events:none;
      z-index:9999;
      will-change:transform,opacity;
      font-size:54px;
      filter: drop-shadow(0 8px 14px rgba(75,43,59,.18));
    }

    /* popup text */
    .popup{position:fixed;left:50%;top:60%;transform:translate(-50%,-50%);background:rgba(255,255,255,.95);padding:.55rem .9rem;border-radius:999px;box-shadow:0 6px 20px rgba(75,43,59,.12);font-weight:700;opacity:0;transition:opacity .15s}

    /* small responsive tweaks */
    @media (max-width: 768px){
      .wrap{flex-direction:column;padding:1.25rem}
      .left,.right{flex-basis:auto}
      .teddy-holder{height:46vh}
      .card{padding:1.2rem;border-radius:16px}
    }
  </style>
</head>
<body>
  <div class="hearts" aria-hidden="true"></div>
  <main class="wrap" role="main">
    <section class="col left" aria-hidden="true">
      <div class="teddy-holder">
        <div id="teddy"></div>
      </div>
    </section>
    <section class="col right">
      <article class="card" aria-label="A letter to my love">
        <div class="card-inner">
          <div class="from">To my favorite human (even from miles away),</div>
          <div id="letter" class="letter" aria-live="polite"></div>
          <div class="end-row">
            <button id="endBtn" class="end-btn" aria-hidden="true">Thank you for visiting</button>
          </div>
        </div>
      </article>
    </section>
  </main>

  <div id="kissPopup" class="popup" role="status" aria-hidden="true">Mwahhh! ðŸ’‹ðŸ’‹</div>

  <!-- lottie-web CDN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.9.6/lottie.min.js"></script>
  <script>
    /* TEDDY_LOTTIE_URL: Replace this with your Lottie JSON URL */
    const TEDDY_LOTTIE_URL = 'https://lottie.host/73ab4e1a-0880-4c09-afb2-38df583b0b6b/1wn7YhF82C.json';

    // --- Lottie setup ---
    lottie.loadAnimation({
      container: document.getElementById('teddy'),
      renderer: 'svg',
      loop: true,
      autoplay: true,
      path: TEDDY_LOTTIE_URL
    });

    // --- Valentine message lines ---
    const messageLines = [
      "Sometimes I think itâ€™s funny how someone so far away can feel closer to me than the people sitting right next to me.",
      "When I think of â€œhome,â€ itâ€™s not really a place anymore â€” itâ€™s your voice, your laugh, and those late-night calls where I say â€œokay last five minutesâ€ and then talk for two more hours.",
      "Long distance is weird.",
      "I canâ€™t steal your hoodies.",
      "I canâ€™t randomly hug you.",
      "I canâ€™t annoy you in person.",
      "But somehowâ€¦ you still manage to steal my heart every single day.",
      "Thank you for being patient with the time zones, the bad networks, the sleepy â€œhmm?â€ replies, and my dramatic â€œI miss youâ€ texts.",
      "Thank you for staying up late just to talk to me, even when you have work the next morning.",
      "(Yes, I notice. Yes, youâ€™re cute. No, donâ€™t argue.)",
      "I love how we turn simple things into memories â€”",
      "movie nights on call,",
      "sending each other memes,",
      "arguing about trivial things,",
      "and saying â€œeat properlyâ€ like an old married couple.",
      "",
      "You make distance feel smaller.",
      "You make ordinary days feel special.",
      "And you make my heart feel ridiculously full.",
      "",
      "Alsoâ€¦ how dare you be this adorable from so far away?",
      "Itâ€™s honestly unfair.",
      "If teleportation existed, Iâ€™d already be at your door with snacks, hugs, and zero personal space.",
      "",
      "Until then, Iâ€™m sending you virtual kisses, pixel hugs, and 10,000 â€œI miss yous.â€",
      "",
      "No matter how many kilometers are between us,",
      "no matter how many countdowns we do,",
      "no matter how long the wait feels â€”",
      "you are worth every second.",
      "",
      "So hereâ€™s to usâ€¦",
      "to late nights,",
      "to silly jokes,",
      "to screenshots of each otherâ€™s sleepy faces,",
      "to future airport hugs,",
      "and to the day distance finally loses.",
      
      "Happy Valentineâ€™s Day, my favorite person, my safe place, my chaos partner, and my forever.",
      "Now hurry up and come here so I can annoy you in real life.",
      "",
      "Love you more than Wi-Fi, sleep, and chocolate combined ðŸ’‹",
      "â€” Yours, always."
    ];

    const letterEl = document.getElementById('letter');
    const endBtn   = document.getElementById('endBtn');
    const kissPopup = document.getElementById('kissPopup');
    const cardEl = document.querySelector('.card');

    const wait = (ms) => new Promise(res => setTimeout(res, ms));

    // Sentences appear left->right (FASTER)
    async function showLine(text) {
      const p = document.createElement('p');
      p.className = 'line';
      letterEl.appendChild(p);

      const sentences = text.match(/[^.!?]*[.!?]+|[^.!?]+$/g) || [text];

      for (const raw of sentences) {
        const s = raw.trim();
        if (!s) continue;

        const span = document.createElement('span');
        span.className = 'sentence';
        span.textContent = s + ' ';
        p.appendChild(span);

        // trigger reveal
        requestAnimationFrame(() => span.classList.add('reveal'));

        // âœ… faster timing
        const perChar = 10; // ms per character
        const dur = Math.max(280, Math.min(1100, s.length * perChar));
        await wait(dur + 80);
      }

      requestAnimationFrame(() => p.classList.add('visible'));
      await wait(80);
    }

    async function runTyping() {
      for (const line of messageLines) {
        await showLine(line);
      }
      endBtn.classList.add('show');
      endBtn.setAttribute('aria-hidden', 'false');
    }

    document.addEventListener('DOMContentLoaded', runTyping);

    // --- Kiss shower effect (INSTANT + faster) ---
    function playPopSound() {
      try {
        const ctx = new (window.AudioContext || window.webkitAudioContext)();
        const o = ctx.createOscillator();
        const g = ctx.createGain();
        o.type = 'sine';
        o.frequency.setValueAtTime(600, ctx.currentTime);
        g.gain.setValueAtTime(0, ctx.currentTime);
        g.gain.linearRampToValueAtTime(0.22, ctx.currentTime + 0.001);
        g.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime + 0.15);
        o.connect(g); g.connect(ctx.destination);
        o.start(); o.stop(ctx.currentTime + 0.18);
      } catch (e) {}
    }

    function burstKissesInCard(cardEl, count = 180) {
      const r = cardEl.getBoundingClientRect();

      for (let i = 0; i < count; i++) {
        const k = document.createElement('div');
        k.className = 'kiss';
        k.textContent = 'ðŸ’‹';
        document.body.appendChild(k);

        // random start point inside card
        const x = r.left + Math.random() * r.width;
        const y = r.top  + Math.random() * r.height;

        k.style.left = x + 'px';
        k.style.top  = y + 'px';

        // size variation (bigger)
        const size = 42 + Math.random() * 48; // 42px to 90px
        k.style.fontSize = size + 'px';

        // faster burst
        const dx  = (Math.random() - 0.5) * 260;
        const dy  = -(160 + Math.random() * 360);
        const rot = (Math.random() - 0.5) * 600;
        const dur = 700 + Math.random() * 550;

        // set initial state immediately
        k.style.opacity = '1';
        k.style.transform = 'translate(0,0) rotate(0deg)';
        k.style.transition = `transform ${dur}ms cubic-bezier(.12,.8,.16,1), opacity ${dur}ms linear`;

        // trigger animation immediately (next tick)
        setTimeout(() => {
          k.style.transform = `translate(${dx}px, ${dy}px) rotate(${rot}deg)`;
          k.style.opacity = '0';
        }, 0);

        setTimeout(() => k.remove(), dur + 80);
      }
    }

    endBtn.addEventListener('click', () => {
      // âœ… show kisses first (instant feel)
      burstKissesInCard(cardEl, 25);

      // popup
      kissPopup.style.opacity = '2';
      kissPopup.setAttribute('aria-hidden', 'false');
      setTimeout(() => {
        kissPopup.style.opacity = '1';
        kissPopup.setAttribute('aria-hidden', 'true');
      }, 1200);

      // sound (after)
      playPopSound();
    });

    // --- Ambient floating hearts ---
    (function spawnHearts(){
      const container = document.querySelector('.hearts');
      const max = 10;
      for (let i=0;i<max;i++){
        const h = document.createElement('div');
        h.className = 'heart';
        h.textContent = 'â¤';
        const size = 8 + Math.random()*18;
        h.style.fontSize = size + 'px';
        h.style.left = Math.random()*100 + '%';
        h.style.bottom = (-10 - Math.random()*20) + 'px';
        h.style.opacity = (0.06 + Math.random()*0.18).toString();
        container.appendChild(h);
        const rise = 8000 + Math.random()*16000;
        const drift = (Math.random()*60-30);
        h.animate([
          { transform: `translateY(0) translateX(0) rotate(0deg)`, opacity: h.style.opacity },
          { transform: `translateY(-${window.innerHeight + 120}px) translateX(${drift}px) rotate(${(Math.random()-0.5)*180}deg)`, opacity: 0 }
        ],{duration:rise,iterations:Infinity,easing:'linear',delay:-Math.random()*5000});
      }
    })();

    // Fallback if DOMContentLoaded already passed
    if (document.readyState === 'complete' || document.readyState === 'interactive'){
      setTimeout(()=>{ if (!letterEl.hasChildNodes()) runTyping(); }, 60);
    }
  </script>
</body>
</html>
